<!DOCTYPE html>
<html lang="en">

<head>
  <title>Scenarios</title>
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: "Roboto", sans-serif;
      background: rgb(18, 27, 45);
      color: rgb(236, 240, 241);

    }

    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      padding: 10px;
      background: #151f35;
      box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.7);
      text-align: right;
      font-size: 18px;
      font-weight: bold;
      color: #fff;
      padding-right: 40px;
    }

    .container {
      margin-top: 60px;
      width: 60%;
      max-width: 800px;
      text-align: center;
      padding: 20px;
      background-color: #151f35;
      border-radius: 15px;
      box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
    }

    .button-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    .full-width-button {
      min-width: 140px;
      height: 60px;
      margin: 10px;
      padding: 10px;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      font-weight: bold;
      text-decoration: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.5);
      background: linear-gradient(to right, #3868d0, #000d2b);
      position: relative;
      transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
    }

    .full-width-button:hover {
      transform: scale(1.1);
      box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.7);
    }

    .scenario {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 10px;
    }

    .completed-checkbox {
      margin-left: 15px;
      transform: scale(1.3);
    }

    .scenario-header {
      font-size: 36px;
      margin: 15px 0;
      font-weight: bold;
      text-shadow: 0 0 10px rgb(236, 240, 241, 0.8);
    }

    p {
      margin: 15px auto;
      width: 90%;
      color: rgb(56, 104, 208);
      text-shadow: 0 0 10px rgba(56, 104, 208, 0.8);
      font-size: 18px;
      line-height: 1.6;
      font-weight: bold;
    }

    .homepage-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 200px;
      padding: 15px;
      background: #3868d0;
      color: white;
      text-align: center;
      border-radius: 8px;
      text-decoration: none;
      font-size: 18px;
      font-weight: bold;
      box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.5);
      transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s;
    }

    .homepage-button:hover {
      background: linear-gradient(135deg, #3868d0, #000d2b);
      transform: scale(1.05);
      box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.7);
    }

    .text {
      text-align: justify;
    }

    .score {
      margin-top: 10px;
      background: #fff;
      color: #151f35;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 16px;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <div class="navbar">
    Total Score: <span id="total-score">0</span>
  </div>
  <div class="container">
    <div class="scenario-header">Scenarios</div>
    <p class="text">
      In this section, you will find various cybersecurity scenarios to test the security of your IoT devices. Each
      scenario aims to offer practical solutions by simulating the security threats you may encounter in real life.
      These AI-supported scenarios are designed to create awareness and provide training for both individual users and
      organizations. Each scenario will guide you step by step to prepare you for possible cyber-attacks. Discover the
      scenarios now and gain the knowledge and skills needed to enhance the security of your IoT devices.
    </p>
    <div class="button-container">
      <div class="scenario">
        <a href="{{ url_for('views.senaryo1') }}" class="full-width-button">
          Scenario 1
          <div class="score">Point: 50</div>
        </a>
        <input type="checkbox" id="checkbox1" class="completed-checkbox" onclick="toggleButtonActive(this)"
          data-score="50" />
      </div>
      <div class="scenario">
        <a href="{{ url_for('views.senaryo2') }}" class="full-width-button">
          Scenario 2
          <div class="score">Point: 60</div>
        </a>
        <input type="checkbox" id="checkbox2" class="completed-checkbox" onclick="toggleButtonActive(this)"
          data-score="60" />
      </div>
      <div class="scenario">
        <a href="{{ url_for('views.senaryo3') }}" class="full-width-button">
          Scenario 3
          <div class="score">Point: 30</div>
        </a>
        <input type="checkbox" id="checkbox3" class="completed-checkbox" onclick="toggleButtonActive(this)"
          data-score="30" />
      </div>
      <div class="scenario">
        <a href="{{ url_for('views.senaryo4') }}" class="full-width-button">
          Scenario 4
          <div class="score">Point: 40</div>
        </a>
        <input type="checkbox" id="checkbox4" class="completed-checkbox" onclick="toggleButtonActive(this)"
          data-score="40" />
      </div>
      <div class="scenario">
        <a href="{{ url_for('views.senaryo5') }}" class="full-width-button">
          Scenario 5
          <div class="score">Point: 60</div>
        </a>
        <input type="checkbox" id="checkbox5" class="completed-checkbox" onclick="toggleButtonActive(this)"
          data-score="60" />
      </div>
    </div>
  </div>
  <a href="/" class="homepage-button">Return to Homepage</a>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Load the checkbox states from localStorage
      for (let i = 1; i <= 5; i++) {
        const checkbox = document.getElementById("checkbox" + i);
        checkbox.checked = localStorage.getItem("checkbox" + i) === "true";
        toggleButtonActive(checkbox);
      }
      updateTotalScore();
    });

    function toggleButtonActive(checkbox) {
      var button = checkbox.previousElementSibling;
      if (checkbox.checked) {
        button.style.background = "#151f35"; // Light green color when completed
      } else {
        button.style.background = "linear-gradient(to right, #3868d0, #000d2b)";
      }
      // Save the checkbox state to localStorage
      localStorage.setItem(checkbox.id, checkbox.checked);
      updateTotalScore();
    }

    function updateTotalScore() {
    let totalScore = 0;
    for (let i = 1; i <= 5; i++) {
        const checkbox = document.getElementById("checkbox" + i);
        if (checkbox.checked) {
            totalScore += parseInt(checkbox.getAttribute("data-score"));
        }
    }
    document.getElementById("total-score").innerText = totalScore;

    // Puanı sunucuya gönder
    sendTotalScoreToServer(totalScore);
}

function sendTotalScoreToServer(score) {
    fetch('/update_score', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ total_score: score })
    })
    .then(response => response.json())
    .then(data => {
        console.log('Success:', data);
    })
    .catch((error) => {
        console.error('Error:', error);
    });
}
  </script>
</body>

</html>